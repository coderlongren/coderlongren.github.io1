---
title: 复杂链表复制
date: 2018-6-8 23:18:40
categories:
	- Algorithm
tags:
	- Algorithm
---

摘要： 。。。。
<!-- More -->

比一般的链表多了个随机指针，深度复制，不能浅复制，  
当然你用Java的clone() 也可以啦，哈哈。  
还是Python代码好看啊，唉，最接近人类语言了。

```python
# Definition for singly-linked list with a random pointer.
# class RandomListNode(object):
#     def __init__(self, x):
#         self.label = x
#         self.next = None
#         self.random = None

class Solution(object):
    def copyRandomList(self, head):
        """
        :type head: RandomListNode
        :rtype: RandomListNode
        """
        if not head:
            return head
        map = {}
        newHead = head
        while newHead:
            map[newHead] = RandomListNode(newHead.label)
            newHead = newHead.next
            
        newHead = head
        while newHead:
            map[newHead].next = map[newHead.next] if newHead.next else None
            map[newHead].random = map[newHead.random] if newHead.random else None
            newHead = newHead.next
        return map[head] if map[head] else None
```

`照例的Java代码`
```Java
public static RandomListNode Clone(RandomListNode pHead){
	if (pHead == null) {
		return null;
	}
	
	RandomListNode newHead = new RandomListNode(pHead.label);
	RandomListNode pre = pHead;
	RandomListNode newPre = newHead;
	Map<RandomListNode, RandomListNode> map = new HashMap<>();
	map.put(pre, newPre); // 头结点全都进入
	
	// 处理所有next节点
	while (pre.next != null) {
		newPre.next = new RandomListNode(pre.next.label);
		pre = pre.next;
		newPre = newPre.next;
		map.put(newPre, pre);
	}
	
	// 处理所有random节点
	pre = pHead;
	newPre = newHead;
	
	while (newPre != null) {
		newPre.randomListNode  = map.get(pre.randomListNode);
		newPre = newPre.next;
		pre = pre.next;
		
	}
	
	
	return newHead;
}
```