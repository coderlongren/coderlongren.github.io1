<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-CN">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.2" />






<meta property="og:type" content="website">
<meta property="og:title" content="coderlong的博客">
<meta property="og:url" content="https://coderlongren.github.io/index.html">
<meta property="og:site_name" content="coderlong的博客">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="coderlong的博客">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: 'coderlong'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://coderlongren.github.io/"/>





  <title>coderlong的博客</title>
  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?b36fb048041f31d8aab6a5184644789e";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>










</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left 
   page-home 
 ">
    <div class="headband">
      <a href="https://github.com/coderlongren"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/38ef81f8aca64bb9a64448d0d70f1308ef5341ab/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6461726b626c75655f3132313632312e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"></a>  
  
    </div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">coderlong的博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">正是江南好风景，落花时节又逢君</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于我
          </a>
        </li>
      
        
        <li class="menu-item menu-item-commonweal">
          <a href="/404.html" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br />
            
            公益404
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://coderlongren.github.io/2018/04/27/leetcode417. Pacific Atlantic Water Flow/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Sailong Ren">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="coderlong的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/27/leetcode417. Pacific Atlantic Water Flow/" itemprop="url">417. Pacific Atlantic Water Flow</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-27T16:18:40+08:00">
                2018-04-27
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/algorithm/" itemprop="url" rel="index">
                    <span itemprop="name">algorithm</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><strong>原题目:</strong><br>Given an m x n matrix of non-negative integers representing the height of each unit cell in a continent, the “Pacific ocean” touches the left and top edges of the matrix and the “Atlantic ocean” touches the right and bottom edges.</p>
<p>Water can only flow in four directions (up, down, left, or right) from a cell to another one with height equal or lower.</p>
<p>Find the list of grid coordinates where water can flow to both the Pacific and Atlantic ocean.</p>
<p><strong>Note:</strong></p>
<pre><code>The order of returned grid coordinates does not matter.
Both m and n are less than 150.
</code></pre><p><strong>Example:</strong></p>
<p>Given the following 5x5 matrix:</p>
<p>  Pacific ~   ~   ~   ~   ~<br>       ~  1   2   2   3  (5) <em><br>       ~  3   2   3  (4) (4) </em><br>       ~  2   4  (5)  3   1  <em><br>       ~ (6) (7)  1   4   5  </em><br>       ~ (5)  1   1   2   4  *</p>
<pre><code>*   *   *   *   * Atlantic
</code></pre><p><strong>Return:</strong></p>
<p>[[0, 4], [1, 3], [1, 4], [2, 2], [3, 0], [3, 1], [4, 0]] (positions with parentheses in above matrix).</p>
<p>题目说，在每个位置<strong>matrix[x][y]</strong> 代表这个点的高度， 每个点可以流向等于或者低于自己高度的点。<br>上面，左面代表 Pacific, 右面，下面代表Atlantic ，求这个matrix里面可以同时流向太平洋，大西洋的坐标集。<br>一般看到就会想到DFS的解法，我第一次理解错了题意，结果遍历matrix里的每个点， 看是否他能到达两个海洋。最后，超时，思考更完善的算法。<br><code>Java BFS</code><br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">	<span class="keyword">int</span>[][] dics = <span class="keyword">new</span> <span class="keyword">int</span>[][]&#123;&#123;<span class="number">1</span>,<span class="number">0</span>&#125;, &#123;<span class="number">0</span>,<span class="number">1</span>&#125;,&#123;-<span class="number">1</span>,<span class="number">0</span>&#125;, &#123;<span class="number">0</span>,-<span class="number">1</span>&#125;&#125;;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">		<span class="comment">// TODO Auto-generated method stub</span></div><div class="line"></div><div class="line">	&#125;</div><div class="line">	<span class="comment">//  这道题明显是可以使用 BFS 或者DFS 来做的，</span></div><div class="line">	<span class="comment">// 第一种我才用 广搜</span></div><div class="line">	<span class="keyword">public</span> List&lt;<span class="keyword">int</span>[]&gt; pacificAtlantic(<span class="keyword">int</span>[][] matrix) &#123;</div><div class="line">		List&lt;<span class="keyword">int</span>[]&gt; res = <span class="keyword">new</span> ArrayList&lt;&gt;();</div><div class="line">		<span class="keyword">if</span> (matrix == <span class="keyword">null</span> || matrix.length == <span class="number">0</span> || matrix[<span class="number">0</span>].length == <span class="number">0</span>) &#123;</div><div class="line">			<span class="keyword">return</span> res;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">int</span> rows = matrix.length;</div><div class="line">		<span class="keyword">int</span> cols = matrix[<span class="number">0</span>].length;</div><div class="line">		<span class="keyword">boolean</span>[][] pacific =  <span class="keyword">new</span> <span class="keyword">boolean</span>[rows][cols]; <span class="comment">// 记录 可以到达 pacific</span></div><div class="line">		<span class="keyword">boolean</span>[][] atlantic = <span class="keyword">new</span> <span class="keyword">boolean</span>[rows][cols]; <span class="comment">// 记录可以到达 atlantic</span></div><div class="line">		Stack&lt;<span class="keyword">int</span>[]&gt; visitPac = <span class="keyword">new</span> Stack&lt;&gt;();</div><div class="line">		Stack&lt;<span class="keyword">int</span>[]&gt; visitAtlan = <span class="keyword">new</span> Stack&lt;&gt;();</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; rows; i++) &#123;</div><div class="line">			pacific[i][<span class="number">0</span>] = <span class="keyword">true</span>;</div><div class="line">			visitPac.push(<span class="keyword">new</span> <span class="keyword">int</span>[]&#123;i,<span class="number">0</span>&#125;);</div><div class="line">			atlantic[i][cols - <span class="number">1</span>] = <span class="keyword">true</span>;</div><div class="line">			visitAtlan.push(<span class="keyword">new</span> <span class="keyword">int</span>[]&#123;i,cols - <span class="number">1</span>&#125;);</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; cols; j++) &#123;</div><div class="line">			pacific[<span class="number">0</span>][j] = <span class="keyword">true</span>;</div><div class="line">			visitPac.push(<span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">0</span>,j&#125;);</div><div class="line">			atlantic[rows - <span class="number">1</span>][j] = <span class="keyword">true</span>;</div><div class="line">			visitAtlan.push(<span class="keyword">new</span> <span class="keyword">int</span>[]&#123;rows - <span class="number">1</span>, j&#125;);</div><div class="line">		&#125;</div><div class="line">		bfs(matrix, visitPac, pacific);</div><div class="line">		bfs(matrix, visitAtlan, atlantic);</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; rows; i++) &#123;</div><div class="line">			<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; cols; j++) &#123;</div><div class="line">				<span class="keyword">if</span> (pacific[i][j] &amp;&amp; atlantic[i][j]) &#123;</div><div class="line">					res.add(<span class="keyword">new</span> <span class="keyword">int</span>[]&#123;i,j&#125;);</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">return</span> res;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">bfs</span><span class="params">(<span class="keyword">int</span>[][] matrix, Stack&lt;<span class="keyword">int</span>[]&gt; stack, <span class="keyword">boolean</span>[][] visited)</span> </span>&#123;</div><div class="line">		<span class="keyword">int</span> rows = matrix.length;</div><div class="line">		<span class="keyword">int</span> cols = matrix[<span class="number">0</span>].length;</div><div class="line">		<span class="keyword">while</span> (!stack.isEmpty()) &#123;</div><div class="line">			<span class="keyword">int</span>[] idx = stack.pop();</div><div class="line">			<span class="keyword">for</span> (<span class="keyword">int</span>[] dic:dics) &#123;</div><div class="line">				<span class="keyword">int</span> x = idx[<span class="number">0</span>] + dic[<span class="number">0</span>];</div><div class="line">				<span class="keyword">int</span> y = idx[<span class="number">1</span>] + dic[<span class="number">1</span>];</div><div class="line">				<span class="keyword">if</span> (x &lt; <span class="number">0</span> || x &gt;= rows || y &lt; <span class="number">0</span> || y &gt;= cols || visited[x][y] || matrix[x][y] &lt; matrix[idx[<span class="number">0</span>]][idx[<span class="number">1</span>]]) &#123;</div><div class="line">					<span class="keyword">continue</span>;</div><div class="line">				&#125;</div><div class="line">				visited[x][y] = <span class="keyword">true</span>;</div><div class="line">				stack.push(<span class="keyword">new</span> <span class="keyword">int</span>[]&#123;x,y&#125;);</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>后来看到别人提交的DFS版本的答案，DFS 更加好理解。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> java.util.ArrayList;</div><div class="line"><span class="keyword">import</span> java.util.List;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment">* <span class="doctag">@author</span> 作者 : coderlong</span></div><div class="line"><span class="comment">* <span class="doctag">@version</span> 创建时间：2018年4月27日 下午2:59:28</span></div><div class="line"><span class="comment">* 类说明: </span></div><div class="line"><span class="comment">*/</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">leetcode417_Pactic_Atlantic_water_Flow2</span> </span>&#123;</div><div class="line">	<span class="keyword">public</span> <span class="keyword">int</span>[][] dics = &#123;&#123;<span class="number">1</span>,<span class="number">0</span>&#125;, &#123;-<span class="number">1</span>,<span class="number">0</span>&#125;, &#123;<span class="number">0</span>,<span class="number">1</span>&#125;, &#123;<span class="number">0</span>,-<span class="number">1</span>&#125;&#125;;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">		<span class="comment">// TODO Auto-generated method stub</span></div><div class="line"></div><div class="line">	&#125;</div><div class="line">	<span class="keyword">public</span> List&lt;<span class="keyword">int</span>[]&gt; pacificAtlantic(<span class="keyword">int</span>[][] matrix) &#123;</div><div class="line">		List&lt;<span class="keyword">int</span>[]&gt; res = <span class="keyword">new</span> ArrayList&lt;&gt;();</div><div class="line">		<span class="keyword">if</span> (matrix == <span class="keyword">null</span> || matrix.length == <span class="number">0</span> || matrix[<span class="number">0</span>].length == <span class="number">0</span>) &#123;</div><div class="line">			<span class="keyword">return</span> res;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">int</span> rows = matrix.length;</div><div class="line">		<span class="keyword">int</span> cols = matrix[<span class="number">0</span>].length;</div><div class="line">		</div><div class="line">		<span class="keyword">boolean</span>[][] pacific = <span class="keyword">new</span> <span class="keyword">boolean</span>[rows][cols];</div><div class="line">		<span class="keyword">boolean</span>[][] atlantic = <span class="keyword">new</span> <span class="keyword">boolean</span>[rows][cols];</div><div class="line">		<span class="comment">// 用Integer.MIN_VALUE 来访问 四周边界元素， 保证四周元素绝对可以流向visit海域</span></div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; rows; i++) &#123;</div><div class="line">			dfs(matrix, Integer.MIN_VALUE, i, <span class="number">0</span>, pacific);</div><div class="line">			dfs(matrix, Integer.MIN_VALUE, i, cols - <span class="number">1</span>, atlantic);</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; cols; j++) &#123;</div><div class="line">			dfs(matrix, Integer.MIN_VALUE, <span class="number">0</span>, j, pacific);</div><div class="line">			dfs(matrix, Integer.MIN_VALUE, rows - <span class="number">1</span>, j, atlantic);</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; rows; i++) &#123;</div><div class="line">			<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; cols; j++) &#123;</div><div class="line">				<span class="keyword">if</span> (pacific[i][j] &amp;&amp; atlantic[i][j]) &#123;</div><div class="line">					res.add(<span class="keyword">new</span> <span class="keyword">int</span>[]&#123;i,j&#125;);</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">return</span> res;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span>[][] matrix, <span class="keyword">int</span> height, <span class="keyword">int</span> x, <span class="keyword">int</span> y, <span class="keyword">boolean</span>[][]visit)</span> </span>&#123;</div><div class="line">		<span class="keyword">int</span> rows = matrix.length;</div><div class="line">		<span class="keyword">int</span> cols = matrix[<span class="number">0</span>].length;</div><div class="line">		<span class="comment">// x y 为坐标， 需先判断是否符合要求</span></div><div class="line">		<span class="keyword">if</span> (x &lt;<span class="number">0</span> || x &gt;= rows || y &lt; <span class="number">0</span> || y &gt;= cols || visit[x][y] || matrix[x][y] &lt; height) &#123;</div><div class="line">			<span class="keyword">return</span> ;</div><div class="line">		&#125;</div><div class="line">		visit[x][y] = <span class="keyword">true</span>; <span class="comment">// (x,y) 可以流向visit海域</span></div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span>[] cur : dics) &#123;</div><div class="line">			dfs(matrix, matrix[x][y], x + cur[<span class="number">0</span>], y + cur[<span class="number">1</span>], visit);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://coderlongren.github.io/2018/04/25/Docker入门记录一下/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Sailong Ren">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="coderlong的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/25/Docker入门记录一下/" itemprop="url">Docker  Hello World</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-25T14:18:40+08:00">
                2018-04-25
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Docker/" itemprop="url" rel="index">
                    <span itemprop="name">Docker</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>刚在 Win10装好Docker，第一条命令当然是看一下成功了没？ </p>
<pre><code>PS C:\Users\86298&gt; docker -v
Docker version 18.03.0-ce, build 0520e24
PS C:\Users\86298&gt; docker
</code></pre><p>OK –&gt;<br>运行下Hello world呢?<br>    PS C:\Users\86298&gt; docker run ubuntu:15.10 /bin/echo “hello world”</p>
<p>这里命令 <code>docker run ubuntu:15.10 /bin/echo &quot;hello world&quot;</code></p>
<ul>
<li><p>docker: 就是用Docker二进制文件来执行命令</p>
</li>
<li><p>run:与前面的 docker 组合来运行一个容器。</p>
</li>
<li><p>ubuntu:15.10指定要运行的镜像，Docker首先从本地主机上查找镜像是否存在，如果不存在，Docker 就会从镜像仓库 Docker Hub 下载公共镜像。</p>
</li>
<li><p>/bin/echo “Hello world”: 在启动的容器里执行的命令<br>下面就是从源pull iamge的过程</p>
<p>  Unable to find image ‘ubuntu:15.10’ locally<br>  15.10: Pulling from library/ubuntu<br>  7dcf5a444392: Pull complete<br>  759aa75f3cee: Pull complete<br>  3fa871dc8a2b: Pull complete<br>  224c42ae46e7: Pull complete<br>  Digest: sha256:02521a2d079595241c6793b2044f02eecf294034f31d6e235ac4b2b54ffc41f3<br>  Status: Downloaded newer image for ubuntu:15.10<br>  hello world</p>
<p>   docker run -i -t ubuntu:15.10 /bin/bash</p>
</li>
</ul>
<p>模拟和Docker容器交互式<br>    -t:在新容器内指定一个伪终端或终端。</p>
<pre><code>-i:允许你对容器内的标准输入 (STDIN) 进行交互。  
</code></pre><p>下面你就使用这台ubuntu15.10主机了。</p>
<pre><code>root@de839238d52e:/# ls
bin  boot  dev  etc  home  lib  lib64  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var
root@de839238d52e:/# echo &quot;hello world&quot;
hello world
root@de839238d52e:/# whoami
root
root@de839238d52e:/# top
top - 06:25:36 up 9 min,  0 users,  load average: 0.32, 0.31, 0.18
Tasks:   2 total,   1 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.0 us,  0.0 sy,  0.0 ni,100.0 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem:   2027764 total,  1805460 used,   222304 free,     9344 buffers
KiB Swap:  1048572 total,        0 used,  1048572 free.  1378564 cached Mem

   PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
     1 root      20   0   18208   3348   2872 S   0.0  0.2   0:00.03 bash
    11 root      20   0   19912   2464   2096 R   0.0  0.1   0:00.00 top
</code></pre><h2 id="构建自己的Docker镜像"><a href="#构建自己的Docker镜像" class="headerlink" title="构建自己的Docker镜像"></a>构建自己的Docker镜像</h2><p><code>Dockerfile</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">FROM    centos:6.7</div><div class="line">MAINTAINER      Fisher &quot;fisher@sudops.com&quot;</div><div class="line"></div><div class="line">RUN     /bin/echo &apos;root:123456&apos; |chpasswd</div><div class="line">RUN     useradd runoob</div><div class="line">RUN     /bin/echo &apos;runoob:123456&apos; |chpasswd</div><div class="line">RUN     /bin/echo -e &quot;LANG=\&quot;en_US.UTF-8\&quot;&quot; &gt;/etc/default/local</div><div class="line">EXPOSE  22</div><div class="line">EXPOSE  80</div><div class="line">CMD     /usr/sbin/sshd -D</div></pre></td></tr></table></figure></p>
<p>使用 Dockerfile 文件，通过 docker build 命令来构建一个镜像。s<br>    docker build -t runoob/centos:6.7 .</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://coderlongren.github.io/2018/04/23/NOWCODER_SQL2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Sailong Ren">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="coderlong的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/23/NOWCODER_SQL2/" itemprop="url">NOWCODER_SQL题目</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-23T23:18:40+08:00">
                2018-04-23
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/MySQL/" itemprop="url" rel="index">
                    <span itemprop="name">MySQL</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ol>
<li>获取所有员工当前的manager，如果当前的manager是自己的话结果不显示，当前表示to_date=’9999-01-01’。<br>结果第一列给出当前员工的emp_no,第二列给出其manager对应的manager_no。<br>CREATE TABLE <code>dept_emp</code> (<br> <code>emp_no</code> int(11) NOT NULL,<br> <code>dept_no</code> char(4) NOT NULL,<br> <code>from_date</code> date NOT NULL,<br> <code>to_date</code> date NOT NULL,<br> PRIMARY KEY (<code>emp_no</code>,<code>dept_no</code>));<br> CREATE TABLE <code>dept_manager</code> (<br> <code>dept_no</code> char(4) NOT NULL,<br> <code>emp_no</code> int(11) NOT NULL,<br> <code>from_date</code> date NOT NULL,<br> <code>to_date</code> date NOT NULL,<br> PRIMARY KEY (<code>emp_no</code>,<code>dept_no</code>));</li>
</ol>
<p><code>select dept_emp.emp_no,dept_manager.emp_no as manager_no from dept_emp,dept_manager 
where dept_emp.dept_no = dept_manager.dept_no
and dept_emp.emp_no &lt;&gt; dept_manager.emp_no
and dept_emp.to_date=&#39;9999-01-01&#39; and dept_manager.to_date=&#39;9999-01-01&#39;</code></p>
<ol>
<li>获取所有部门中当前员工薪水最高的相关信息，给出dept_no, emp_no以及其对应的salary<br> CREATE TABLE <code>dept_emp</code> (<br> <code>emp_no</code> int(11) NOT NULL,<br> <code>dept_no</code> char(4) NOT NULL,<br> <code>from_date</code> date NOT NULL,<br> <code>to_date</code> date NOT NULL,<br> PRIMARY KEY (<code>emp_no</code>,<code>dept_no</code>));<br> CREATE TABLE <code>salaries</code> (<br> <code>emp_no</code> int(11) NOT NULL,<br> <code>salary</code> int(11) NOT NULL,<br> <code>from_date</code> date NOT NULL,<br> <code>to_date</code> date NOT NULL,<br> PRIMARY KEY (<code>emp_no</code>,<code>from_date</code>));</li>
</ol>
<p><code>Group by语句应用</code></p>
<p><code>select d.dept_no, d.emp_no, max(s.salary) from dept_emp d, salaries s 
where d.emp_no = s.emp_no and s.to_date = &#39;9999-01-01&#39; and d.to_date = &#39;9999-01-01&#39; 
group by d.dept_no;</code></p>
<p>3.查找employees表所有emp_no为奇数，且last_name不为Mary的员工信息，并按照hire_date逆序排列<br>    CREATE TABLE <code>employees</code> (<br>    <code>emp_no</code> int(11) NOT NULL,<br>    <code>birth_date</code> date NOT NULL,<br>    <code>first_name</code> varchar(14) NOT NULL,<br>    <code>last_name</code> varchar(16) NOT NULL,<br>    <code>gender</code> char(1) NOT NULL,<br>    <code>hire_date</code> date NOT NULL,<br>    PRIMARY KEY (<code>emp_no</code>));<br><code>select * from employees e where e.emp_no % 2 = 1 and e.last_name &lt;&gt; &#39;Mary&#39;
order by e.hire_date DESC;</code></p>
<ol>
<li>统计出当前各个title类型对应的员工当前薪水对应的平均工资。结果给出title以及平均工资avg。<br> CREATE TABLE <code>salaries</code> (<br> <code>emp_no</code> int(11) NOT NULL,<br> <code>salary</code> int(11) NOT NULL,<br> <code>from_date</code> date NOT NULL,<br> <code>to_date</code> date NOT NULL,<br> PRIMARY KEY (<code>emp_no</code>,<code>from_date</code>));<br> CREATE TABLE IF NOT EXISTS “titles” (<br> <code>emp_no</code> int(11) NOT NULL,<br> <code>title</code> varchar(50) NOT NULL,<br> <code>from_date</code> date NOT NULL,<br> <code>to_date</code> date DEFAULT NULL);</li>
</ol>
<p><code>select t.title as title, avg(s.salary)as avg  from titles t, salaries s 
where t.emp_no = s.emp_no and t.to_date = &#39;9999-01-01&#39; and s.to_date = &#39;9999-01-01&#39;
group by t.title;</code></p>
<ol>
<li>获取当前（to_date=’9999-01-01’）薪水第二多的员工的emp_no以及其对应的薪水salary</li>
</ol>
<p><code>select s.emp_no, s.salary from salaries s 
where s.to_date = &#39;9999-01-01&#39; order by s.salary DESC
limit 1, 1;</code></p>
<ol>
<li>查找所有员工的last_name和first_name以及对应的dept_name，也包括暂时没有分配部门的员工<br> CREATE TABLE <code>departments</code> (<br> <code>dept_no</code> char(4) NOT NULL,<br> <code>dept_name</code> varchar(40) NOT NULL,<br> PRIMARY KEY (<code>dept_no</code>));<br> CREATE TABLE <code>dept_emp</code> (<br> <code>emp_no</code> int(11) NOT NULL,<br> <code>dept_no</code> char(4) NOT NULL,<br> <code>from_date</code> date NOT NULL,<br> <code>to_date</code> date NOT NULL,<br> PRIMARY KEY (<code>emp_no</code>,<code>dept_no</code>));<br> CREATE TABLE <code>employees</code> (<br> <code>emp_no</code> int(11) NOT NULL,<br> <code>birth_date</code> date NOT NULL,<br> <code>first_name</code> varchar(14) NOT NULL,<br> <code>last_name</code> varchar(16) NOT NULL,<br> <code>gender</code> char(1) NOT NULL,<br> <code>hire_date</code> date NOT NULL,<br> PRIMARY KEY (<code>emp_no</code>));<br>1.第一次LEFT JOIN连接employees表与dept_emp表，得到所有员工的last_name和first_name以及对应的dept_no，也包括暂时没有分配部门的员工</li>
<li>第二次LEFT JOIN连接上表与departments表，即连接dept_no与dept_name，得到所有员工的last_name和first_name以及对应的dept_name，也包括暂时没有分配部门的员工 </li>
</ol>
<p><code>select e.last_name, e.first_name ,de.dept_name from 
employees e left join dept_emp dp on e.emp_no = dp.emp_no
left join departments de on de.dept_no = dp.dept_no;</code></p>
<ol>
<li>查找员工编号emp_now为10001其自入职以来的薪水salary涨幅值growth<br> CREATE TABLE <code>salaries</code> (<br> <code>emp_no</code> int(11) NOT NULL,<br> <code>salary</code> int(11) NOT NULL,<br> <code>from_date</code> date NOT NULL,<br> <code>to_date</code> date NOT NULL,<br> PRIMARY KEY (<code>emp_no</code>,<code>from_date</code>));</li>
</ol>
<p><code>select ((select salary from salaries where emp_no = 10001 order by to_date DESC limit 0,1) - (select salary from salaries where emp_no = 10001 order by to_date limit 0,1))
as growth;</code></p>
<p>8. </p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://coderlongren.github.io/2018/04/20/牛客网SQL题目答案/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Sailong Ren">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="coderlong的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/20/牛客网SQL题目答案/" itemprop="url">牛客网SQL题目答案</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-20T21:18:40+08:00">
                2018-04-20
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/MySQL/" itemprop="url" rel="index">
                    <span itemprop="name">MySQL</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>牛客SQL一直用的就是那几张表</p>
<ol>
<li>查找最晚入职员工的所有信息<br> CREATE TABLE <code>employees</code> (<br> <code>emp_no</code> int(11) NOT NULL,<br> <code>birth_date</code> date NOT NULL,<br> <code>first_name</code> varchar(14) NOT NULL,<br> <code>last_name</code> varchar(16) NOT NULL,<br> <code>gender</code> char(1) NOT NULL,<br> <code>hire_date</code> date NOT NULL,<br> PRIMARY KEY (<code>emp_no</code>));</li>
</ol>
<p>sql:<br><code>select * from employees where hire_date = (select max(hire_date) from employees);</code></p>
<ol>
<li>查找入职员工时间排名倒数第三的员工所有信息<br> CREATE TABLE <code>employees</code> (<br> <code>emp_no</code> int(11) NOT NULL,<br> <code>birth_date</code> date NOT NULL,<br> <code>first_name</code> varchar(14) NOT NULL,<br> <code>last_name</code> varchar(16) NOT NULL,<br> <code>gender</code> char(1) NOT NULL,<br> <code>hire_date</code> date NOT NULL,<br> PRIMARY KEY (<code>emp_no</code>));</li>
</ol>
<p><code>select * from employees where hire_date = (select hire_date from employees order by hire_date desc limit 2,1);</code></p>
<ol>
<li>查找各个部门当前(to_date=’9999-01-01’)领导当前薪水详情以及其对应部门编号dept_no<br> CREATE TABLE <code>dept_manager</code> (<br> <code>dept_no</code> char(4) NOT NULL,<br> <code>emp_no</code> int(11) NOT NULL,<br> <code>from_date</code> date NOT NULL,<br> <code>to_date</code> date NOT NULL,<br> PRIMARY KEY (<code>emp_no</code>,<code>dept_no</code>));<br> CREATE TABLE <code>salaries</code> (<br> <code>emp_no</code> int(11) NOT NULL,<br> <code>salary</code> int(11) NOT NULL,<br> <code>from_date</code> date NOT NULL,<br> <code>to_date</code> date NOT NULL,<br> PRIMARY KEY (<code>emp_no</code>,<code>from_date</code>));</li>
</ol>
<p><code>select s.*,d.dept_no from salaries s ,dept_manager d  where s.emp_no = d.emp_no and d.to_date=&#39;9999-01-01&#39; and s.to_date=&#39;9999-01-01&#39;;</code></p>
<ol>
<li>查找所有已经分配部门的员工的last_name和first_name<br> CREATE TABLE <code>dept_emp</code> (<br> <code>emp_no</code> int(11) NOT NULL,<br> <code>dept_no</code> char(4) NOT NULL,<br> <code>from_date</code> date NOT NULL,<br> <code>to_date</code> date NOT NULL,<br> PRIMARY KEY (<code>emp_no</code>,<code>dept_no</code>));<br> CREATE TABLE <code>employees</code> (<br> <code>emp_no</code> int(11) NOT NULL,<br> <code>birth_date</code> date NOT NULL,<br> <code>first_name</code> varchar(14) NOT NULL,<br> <code>last_name</code> varchar(16) NOT NULL,<br> <code>gender</code> char(1) NOT NULL,<br> <code>hire_date</code> date NOT NULL,<br> PRIMARY KEY (<code>emp_no</code>));</li>
</ol>
<p><code>select e.last_name, e.first_name,d.dept_no from dept_emp d,employees e where d.emp_no = e.emp_no;</code></p>
<ol>
<li>查找所有员工的last_name和first_name以及对应部门编号dept_no，也包括展示没有分配具体部门的员工<br> CREATE TABLE <code>dept_emp</code> (<br> <code>emp_no</code> int(11) NOT NULL,<br> <code>dept_no</code> char(4) NOT NULL,<br> <code>from_date</code> date NOT NULL,<br> <code>to_date</code> date NOT NULL,<br> PRIMARY KEY (<code>emp_no</code>,<code>dept_no</code>));<br> CREATE TABLE <code>employees</code> (<br> <code>emp_no</code> int(11) NOT NULL,<br> <code>birth_date</code> date NOT NULL,<br> <code>first_name</code> varchar(14) NOT NULL,<br> <code>last_name</code> varchar(16) NOT NULL,<br> <code>gender</code> char(1) NOT NULL,<br> <code>hire_date</code> date NOT NULL,<br> PRIMARY KEY (<code>emp_no</code>));</li>
</ol>
<p><code>select e.last_name, e.first_name ,d.dept_no from  employees e left join  dept_emp d on e.emp_no = d.emp_no;</code></p>
<ol>
<li>查找所有员工入职时候的薪水情况，给出emp_no以及salary， 并按照emp_no进行逆序<br> CREATE TABLE <code>employees</code> (<br> <code>emp_no</code> int(11) NOT NULL,<br> <code>birth_date</code> date NOT NULL,<br> <code>first_name</code> varchar(14) NOT NULL,<br> <code>last_name</code> varchar(16) NOT NULL,<br> <code>gender</code> char(1) NOT NULL,<br> <code>hire_date</code> date NOT NULL,<br> PRIMARY KEY (<code>emp_no</code>));<br> CREATE TABLE <code>salaries</code> (<br> <code>emp_no</code> int(11) NOT NULL,<br> <code>salary</code> int(11) NOT NULL,<br> <code>from_date</code> date NOT NULL,<br> <code>to_date</code> date NOT NULL,<br> PRIMARY KEY (<code>emp_no</code>,<code>from_date</code>));</li>
</ol>
<p><code>select e.emp_no, s.salary from employees e, salaries s   
where e.emp_no  = s.emp_no and e.hire_date = s.from_date 
order by e.emp_no DESC ;</code></p>
<ol>
<li>查找薪水涨幅超过15次的员工号emp_no以及其对应的涨幅次数t<br> CREATE TABLE <code>salaries</code> (<br> <code>emp_no</code> int(11) NOT NULL,<br> <code>salary</code> int(11) NOT NULL,<br> <code>from_date</code> date NOT NULL,<br> <code>to_date</code> date NOT NULL,<br> PRIMARY KEY (<code>emp_no</code>,<code>from_date</code>));</li>
</ol>
<p><code>select salaries.emp_no, count(salaries.emp_no) t  from salaries
group by salaries.emp_no having t &gt; 15;</code></p>
<ol>
<li>找出所有员工当前(to_date=’9999-01-01’)具体的薪水salary情况，对于相同的薪水只显示一次,并按照逆序显示<br> CREATE TABLE <code>salaries</code> (<br> <code>emp_no</code> int(11) NOT NULL,<br> <code>salary</code> int(11) NOT NULL,<br> <code>from_date</code> date NOT NULL,<br> <code>to_date</code> date NOT NULL,<br> PRIMARY KEY (<code>emp_no</code>,<code>from_date</code>));</li>
</ol>
<p><code>select  distinct salaries.salary  from salaries where salaries.to_date = &#39;9999-01-01&#39;
order by salaries.salary DESC</code></p>
<ol>
<li>获取所有部门当前manager的当前薪水情况，给出dept_no, emp_no以及salary，当前表示to_date=’9999-01-01’<br> CREATE TABLE <code>dept_manager</code> (<br> <code>dept_no</code> char(4) NOT NULL,<br> <code>emp_no</code> int(11) NOT NULL,<br> <code>from_date</code> date NOT NULL,<br> <code>to_date</code> date NOT NULL,<br> PRIMARY KEY (<code>emp_no</code>,<code>dept_no</code>));<br> CREATE TABLE <code>salaries</code> (<br> <code>emp_no</code> int(11) NOT NULL,<br> <code>salary</code> int(11) NOT NULL,<br> <code>from_date</code> date NOT NULL,<br> <code>to_date</code> date NOT NULL,<br> PRIMARY KEY (<code>emp_no</code>,<code>from_date</code>));</li>
</ol>
<p><code>select dept_manager.dept_no, dept_manager.emp_no, salaries.salary from  salaries , dept_manager 
where salaries.to_date=&#39;9999-01-01&#39; and dept_manager.to_date=&#39;9999-01-01&#39; and dept_manager.emp_no = salaries.emp_no;</code></p>
<ol>
<li>获取所有非manager的员工emp_no<br>CREATE TABLE <code>dept_manager</code> (<br><code>dept_no</code> char(4) NOT NULL,<br><code>emp_no</code> int(11) NOT NULL,<br><code>from_date</code> date NOT NULL,<br><code>to_date</code> date NOT NULL,<br>PRIMARY KEY (<code>emp_no</code>,<code>dept_no</code>));<br>CREATE TABLE <code>employees</code> (<br><code>emp_no</code> int(11) NOT NULL,<br><code>birth_date</code> date NOT NULL,<br><code>first_name</code> varchar(14) NOT NULL,<br><code>last_name</code> varchar(16) NOT NULL,<br><code>gender</code> char(1) NOT NULL,<br><code>hire_date</code> date NOT NULL,<br>PRIMARY KEY (<code>emp_no</code>));</li>
</ol>
<p>明显可以使用很多方法来写SQl </p>
<ul>
<li>使用NOT IN选出在employees但不在dept_manager中的emp_no记录<br><code>SELECT emp_no FROM employees
WHERE emp_no NOT IN (SELECT emp_no FROM dept_manager)</code></li>
<li>先使用LEFT JOIN连接两张表，再从此表中选出dept_no值为NULL对应的emp_no记录 </li>
</ul>
<p><code>select e.emp_no from employees e left join dept_manager d
on e.emp_no = d.emp_no where d.dept_no is null;</code></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://coderlongren.github.io/2018/04/14/2018实习生面经/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Sailong Ren">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="coderlong的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/14/2018实习生面经/" itemprop="url">2018年0 offer面经</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-14T21:18:40+08:00">
                2018-04-14
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/生活/" itemprop="url" rel="index">
                    <span itemprop="name">生活</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="笔试之流水账"><a href="#笔试之流水账" class="headerlink" title="笔试之流水账"></a>笔试之流水账</h2><p>因为我大鹏哥是腾讯大牛，所以第一个是鹏哥给的内推腾讯，后来估计是我简历里面信息填错了，笔试机会也没给我。<br>后来，汪学长内推的美团，笔试觉得做的还可以吧。可还是挂了。<br>自己又去投了，七牛云，百词斩，爱奇艺，搜狐的实习生职位，最后要么都是笔试没通过，要么简历不通过。绝处逢生，湖大的研究生学长内推的阿里，而且第二天电话面试。这个怨自己，问的JDK集合底层实现，Java并发编程，线程池源码啦这些，这个本来是自己的强项，因为第一次电话面试，对方还自称杭州阿里总部的大佬，回答的紧张，最后面试结果不理想。微众银行也没过。<br>今日头条过了笔试，链家网过了笔试。</p>
<h2 id="三月份-初"><a href="#三月份-初" class="headerlink" title="三月份 初"></a>三月份 初</h2><p>最早拿的一份实习职位是汉得公司，据说是上海一家做Oracle数据库的，笔试太简单了。<br>第二天面试，三面一起，在1305，感觉那面试官稀里糊涂乱问，具体的技术问题都没问到，我就说读过JDK源码，做过SSM，懂一点JVM，他就让我过了，而且第二天就发通知Offer发出，你们招人这么随意，谁愿意去啊。后来给我打了几个电话都拒绝了。  </p>
<h2 id="悲惨的面试之京东"><a href="#悲惨的面试之京东" class="headerlink" title="悲惨的面试之京东"></a>悲惨的面试之京东</h2><p>狗东一上来问了几个分布式的问题，我都不会，“你回去好好学习再来。” 直接挂我电话。伤心，好歹我经常在你们网站买东西。</p>
<h2 id="三月中旬"><a href="#三月中旬" class="headerlink" title="三月中旬"></a>三月中旬</h2><p>链家一次略坑的面试。我是在武大参加的宣讲会，宣讲会之后，现场笔试，你能想象两个小时的笔试？ 反正我是第一次做，（继续坑我们啊，），驱车赶到武大就已经六点半了，宣讲快八点了。再来俩小时，十点了，那个饿啊！<br>笔试题目全部算法，不过幸运的是，看过剑指offer的我遇到了熟悉的题目，暴力 + 分治法 + DP + 不会写的写了想法。勉强拿到了面试名额，3.29早早地出发，我擦，找错地方了。HR姐姐通知的纽宾凯鲁光国际酒店，我找到了纽宾凯国际酒店， 和索隆一样路痴了。<br>打电话说了下。下午参加的面试，三轮技术面下午面完。人生第一次大型的面试，一面是个很可爱的大叔，我自我介绍完，就提了一句做过一个小程序，面试官貌似感兴趣，后来和我聊了半个多小时未来技术的发展趋势。完了聊了聊List结构的数组链表实现，涉及扩容，加锁，Java数据内存占用怎么算，HashMap的Hash查找，Indexfor()，自己实现hashcode方法(我用的effective-Java书里给的算法，位运算实现)，fail-fast,著名的currentModifacationException,JVM常见指令，Class文件构成，JMM模型，双亲委托，类加载。。。。对方说话有亲和力，的确聊了很长时间。<br>二面上来了个戴眼镜的人，目测比我大不了多少。可是一开口。。。。。<br>“了解MySQL？”<br>“嗯，熟悉MySQL，，”<br>“那mysql索引呢？”<br>“还可以”<br>“那说一下，索引的物理结构， ”<br>“B+树啊，怎么寻址，范围查询，索引存储，巴拉巴拉。。。。”<br>“嗯好，那你谈谈B+树插入，删除操作。和B树，二叉查找树有什么不一样”<br>“懵逼，这点记得不是太清楚，只记得什么LL，LR，RR旋转”<br>“那么红黑树呢？ 了解吗？ ”<br>“我说了下JDK1.8 HashMap链表往红黑树的转化”<br>“红黑树各种操作的时间复杂度多少？ ”又蒙了，染色+旋转我怎么算？O(nlgn)，O(n)吗？<br>“你说的不对，时间复杂度最优不是On……….”<br>“好吧”，“你说一下，你的项目把！”<br>“我把自己搭建的几个网站说了下，爬虫，并发处理，巴拉巴拉。。。。”<br>“看来你做的项目也没什么难点啊，”， 面试官从此刻开始鄙视我了。。。。<br>后面就是项目细节问题，面试问的很细，一直问到你不会为止。 早知道不往简历上写那一行熟悉MySQL数据库啦，你要是熟悉这些东东都不知道吗？<br>。。。。。<br>“你还有什么要问的?”<br>“你们公司对新人怎么培养啊？”<br>面试官巴拉巴拉说了一堆。<br>二面运气过了，后来听HR说，面试官给的评价基础扎实，项目亮点少。好吧，反正总算过了。<br>三面看对方面相是个leader，上来自我介绍完，面试官鄙视了下我，估计对我的项目也没兴趣。<br>“我们来谈谈数据库吧”<br>“我们有一张几十亿数据的表，插入数据，分库分表怎么弄？”<br>“呃呃 就对表切割啊，横分，或者竖分”其实我也不是很清楚啊，<br>怎么分？分完了，ID相同怎么处理<br>顺序分配吗？ 还是 hash算法散列一下，，？。<br>那假如让你使用一个阻塞队列呢？ 你有什么想法？<br>“就把BlockQueue，AQS那样的中断实现， JAVA里面的那一套说了下”<br>你说的不对，你没考虑并发环境下id自增的bug处理，<br>我又说了说使用无界队列，阻塞唤醒，，，，，，<br>面试仍然不满意，接下来的说话就是一直围绕着这张几十亿的表来进行的，不过后面都是面试官教我新知识，怎么用AWK，grep，shell 写小的数据库监控脚本这些，我说我只用Python写过一些查找文件的。还问我有没有线上排查异常经验，压力测试懂不懂，你觉得我一个大三狗会接触到线上排错这些吗？我就默默的看着他装逼、<br>结果你也知道了，三面没通过，凉凉。。。。。。<br>华丽的分割线。  </p>
<hr>
<p>时间到达2018.4.14 今日头条的视频面  </p>
<p>讲实话， 我觉得头条当初的网上笔试水水。一共是90分钟四道编程题，我AC了二三题，第一题超时。第四题我完全循环偏分，开始没思路，后来想到绝妙骗分思路，通过了90%，估计骗来个面试名额。<br>这个不说，下午一面面试官视频直接卡了，连了几次还是卡，干脆给我打了个电话，电话面试<br>第一道， 二进制字符串，寻找K大的子串中1的最大个数，有些着急了，一眼觉得动态规划就应该可以了，可是没考虑全回溯的条件。bug，后来改了有五六分钟。二叉树中序遍历非递归。<br>第二道，两个排好序的数组合并到一起的前K各元素是多少，很多同学说使用合并排序。其实没有注意到条件已经有序。所以每次拿出数组的第一个元素相互比较循环就可以了。这道题我写的飞快，面试官应该对我比较满意，后来又问了问我TCP状态机，握手挥手具体流程，这方面我学的比较好，说了很多，讲到了TCP首部构成。听他语气应该是过了。一面结束，没一会HR姐姐通知二面。我一二面写代码都是在页面里面的文本编辑框写得。<br>二面是个帅气的大叔，他说他是某某项目技术负责人，继续写算法，逆转链表。写出你能想到的最好的方法，我还问他能不能链表存起来，再倒着建立起来，“你觉得这是我想要的算法吗？”。哈哈，其实我是迷惑他，这个我用很多方法都写过，直接白板写了个递归形式的。但是还是要故作沉思。三分钟，就给出了代码。面试官估计有些惊讶我的速度，又问了些奇怪的问题。说让我用五分钟给你讲明白小程序的前途。不好意思，看过张小龙的演讲，巴拉巴拉给了说了说去中心化，媒体社交传播的重要性。又问了Web相关的知识：Servlet，Spring生命周期，IOC具体实现，反射调用字节码怎么搞，JDK原生注解的实现原理，并发没有深入问，只问了Condation，中断，我是准备的要说Sychronized，还有JUC源码的操作系统层面和JVM的语义的，没有给我机会装这个逼。<br>HTTP1.0 1.1 2.0 的各自区别(我只回答到了首部压缩，二进制分帧。计算机网络问的很细，一直问道1,2,3,4,5的各种状态码啥意思？302 304 305 啥区别，太细节的我忘记了。回答完，他好像挺满意。结束了二面。<br>三面，是个戴眼镜的胖子大叔，这人非常和蔼，一上来就主动和我打招呼，全程都笑眯眯的看着我，提示我的时候也是面带微笑。万幸。<br>三面面试官估计是个大Boss，问了很多不同的技术，界面优化，Web应用的优化(因为我看那本《大型分布式系统架构和Java中间件》淘宝那本书，所以基本都是回答的书里面的概念，负载均衡，页面的CDN代理，应用的横向纵向扩展。读写分离的实现，缓存穿透的解决方案)，数据库优化（幸亏上次面完链家，看了看高《性能MySQL》这本书）。当然我回答的是也有很多漏洞，他再来纠正我。问了TCP协议序列号溢出，我并不知道，redis缓存问题，MySQL主从复制的缺陷怎么解决，还有远程下载文件提速，我是真不会，想着迅雷，电驴，就乱扯了一些自己也不知道的P2P加速，我只有百度百科的那点知识储备。最后还问我我简历上面的那个博客是自己搭建的吗？ 我说用hexo + githubPage建的，他说那你就是搬砖吗？ 最后自己谎称那个界面里面的线条飞舞效果是自己用JS写得，因为自己看过一次别人讲如何实现页面动态效果插件，他没深问JS代码怎么写。又问问JS闭包，原型链模型，JS里面几个重要的对象，BOM，装饰器模式。我强行给他说了说Tomcat里面装饰器模式具体的类，又问装饰器模式和组合模式的优缺点，好吧，我虽然看过设计模式那本书，但是这些具体的我还真忘记了。最后回答了出来。<br>“你有什么问题要问我的？”<br>问了问他，他问的这些问题别人都回答出来了吗？头条今年校招趋势是什么？ 您觉得我哪些地方还有待提高啊？你对我怎么评价？ 最后面试官也不好意思了，就说了我作为软件工程专业的就读生，操作系统掌握的不是太好啊。<br>还问了头条今年校招是重视基础还是项目。当然结果意料之中，两者均优秀是最好了。三面聊了一个多小时把。最后我看这个面试官好说话，拉着她聊了好多职业规划的问题，学习方法选择，他也挺乐意给别人讲解这个。<br>三面结束，三次面试持续了四个小时吧，总的来说头条的笔面试很重视算法，重视基础，对好的项目感兴趣。垃圾项目，根本问都不问。半个小时之后，HR来电话说三面过了，两周内等官网公布结果。估计是进备胎池了。</p>
<hr>
<p><code>最新更新</code>， 2018年4月20号，头条简历状态变为<code>已结束</code>，又凉了。 唉， 昨天晚上，HR还来电话问我offer的事，说随后有人联系，然后直接就放我鸽子了(仔细一想也是，这次头条面试简单，好多985的最后三面过，也被刷下来了，最后是按学校，和前几轮面试评价刷人的，还是自己太菜)。真是玄学面试。不懂你们招聘的套路。最终一个特别满意的offer也没拿到。  </p>
<p>拜拜了， 各位大佬，暑假打算去鹏哥那里去实习，深入学习学习运维。<br>今年春招归根结底还是自己太菜了，所以如果想在秋招收割offer，要在接下来的时间更加努力才行。自己给自己定下几个目标：  </p>
<ol>
<li>啃完 Stevens的那本Unix网络编程，光会用个Netty不懂原理是不行的。看网络编程的同时，要把C++/C的知识补上来，面试问道的C指针，C++虚函数全都忘光了啊。</li>
<li>MySQL优化要搞好，其实没做过真实的运维工作，自己根本不会用书里面的那些优化的技巧。</li>
<li>把分布式原理搞清楚，即使自己不接触到分布式，Ngix,redis, Docker简单怎么使用要学习学习, 把深入理解分布式缓存那本书看完。</li>
<li>看看Spring源码分析，因为自己不太想继续学JavaWeb了，主要目前自己用的语言还是java, JS/Python研究的还不是太深。C++ STL也没怎么用过。这样不懂Java界的Spring源码是不行的，Golang（够浪）要用一用。</li>
<li>还要记得把宗白华的美学散步和看完，整天面对台电脑，艺术细胞快被杀死光光啦。哈哈，<br>秋招自己投的职位还是定位在后台研发方向。</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://coderlongren.github.io/2018/04/13/leetcode207_Course Schedule/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Sailong Ren">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="coderlong的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/13/leetcode207_Course Schedule/" itemprop="url">leetcode207_Course Schedule</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-13T21:18:40+08:00">
                2018-04-13
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/algorithm/" itemprop="url" rel="index">
                    <span itemprop="name">algorithm</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>原题：<br> There are a total of n courses you have to take, labeled from <code>0</code> to <code>n - 1</code>.</p>
<p>Some courses may have prerequisites, for example to take course 0 you have to first take course 1, which is expressed as a pair: <code>[0,1]</code></p>
<p>Given the total number of courses and a list of prerequisite pairs, is it possible for you to finish all courses?</p>
<p>For example:<br><code>2, [[1,0]]</code><br>There are a total of 2 courses to take. To take course 1 you should have finished course 0. So it is possible.</p>
<p><code>2, [[1,0],[0,1]]</code>  </p>
<p>There are a total of 2 courses to take. To take course 1 you should have finished course 0, and to take course 0 you should also have finished course 1. So it is impossible.</p>
<hr>
<p>给多个课程， 还有一个课程的学习数组，数组中为二维， [i,j]代表学习i课程之前，必须先学习j课程，即在图中j为i的前继节点。</p>
<ol>
<li>这道题可以等价于有向图中是否存在环路问题，如果没有环路，那么就有可能学习完所有的课程.  </li>
<li>也可以抽象成一个拓扑排序问题，</li>
<li>使用DFS</li>
<li>使用BFS</li>
</ol>
<p>我们可以使用一个数组， 来记录每门课程一共多少们前继课程，然后使用一个队列，把那些没有前继课程的课程号，入队，遍历队列，循环检查课程二维数组中每个数组，前继节点是否是队列中的元素，如果是的话，课程数组数减一。<br>当然，如果在遍历中，一个课程的前继课程数为0了的话，就把这个课程再次加入到队列中去。</p>
<p>Java代码如下：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">canFinish</span><span class="params">(<span class="keyword">int</span> numCourses, <span class="keyword">int</span>[][] prerequisites)</span> </span>&#123;</div><div class="line">	 <span class="keyword">if</span> (prerequisites == <span class="keyword">null</span>) &#123;</div><div class="line">		 <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">	 &#125;</div><div class="line">     <span class="comment">// 至少知道如何利用这个 课程数量 numCourses</span></div><div class="line">	 <span class="comment">// 记录每个课程的，preRequires</span></div><div class="line">	 <span class="keyword">int</span>[] courses = <span class="keyword">new</span> <span class="keyword">int</span>[numCourses];</div><div class="line">	 <span class="keyword">int</span> len = prerequisites.length;</div><div class="line">	 <span class="keyword">if</span>  (numCourses == <span class="number">0</span> || len == <span class="number">0</span>) &#123;</div><div class="line">		 <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">	 &#125;</div><div class="line">	 <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</div><div class="line">		 <span class="comment">// 假设 prerequisites[1][0] 就说明 1 号课程需要有前继课程, </span></div><div class="line">		 courses[prerequisites[i][<span class="number">0</span>]]++; </div><div class="line">	 &#125;</div><div class="line">	 Queue&lt;Integer&gt; queue = <span class="keyword">new</span> LinkedList&lt;&gt;(); </div><div class="line">	 <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; numCourses; i++) &#123;</div><div class="line">		 <span class="comment">// 说明 i 号课程 没有前继课程 i课程可以直接学习</span></div><div class="line">		 <span class="keyword">if</span> (courses[i] == <span class="number">0</span>) &#123;</div><div class="line">			 queue.offer(i);</div><div class="line">		 &#125;</div><div class="line">	 &#125;</div><div class="line">	 </div><div class="line">	 <span class="comment">// 下面在一一取出队列中，可以直接学习的课程 对prerequisites 判断</span></div><div class="line">	 <span class="keyword">int</span> numNoPre = queue.size();</div><div class="line">	 <span class="keyword">while</span> (!queue.isEmpty()) &#123;</div><div class="line">		 <span class="keyword">int</span> oneNoPrecourse = queue.poll();</div><div class="line">		 <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</div><div class="line">			 <span class="comment">// 这个课程如果是 某个课程的前继课程</span></div><div class="line">			 <span class="keyword">if</span> (prerequisites[i][<span class="number">1</span>] == oneNoPrecourse) &#123;</div><div class="line">				 courses[prerequisites[i][<span class="number">0</span>]]--;</div><div class="line">				 <span class="keyword">if</span> (courses[prerequisites[i][<span class="number">0</span>]] == <span class="number">0</span>) &#123;</div><div class="line">					 numNoPre++;</div><div class="line">					 queue.offer(prerequisites[i][<span class="number">0</span>]);</div><div class="line">				 &#125;</div><div class="line">			 &#125;</div><div class="line">		 &#125;</div><div class="line">	 &#125;</div><div class="line">	 <span class="comment">// 如果没有前继节点的课程数 == 所有课程数</span></div><div class="line">	 <span class="keyword">if</span> (numNoPre == numCourses) &#123;</div><div class="line">		 <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">	 &#125;</div><div class="line">	 <span class="keyword">else</span> &#123;</div><div class="line">		 <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">	 &#125;</div><div class="line"> &#125;</div></pre></td></tr></table></figure></p>
<hr>
<p>再前进一步，我们进入leetcode210. Course Schedule II<br>There are a total of n courses you have to take, labeled from <code>0</code> to<code>n - 1</code>.</p>
<p>Some courses may have prerequisites, for example to take course 0 you have to first take course 1, which is expressed as a pair: <code>[0,1]</code></p>
<p>Given the total number of courses and a list of prerequisite pairs, return the ordering of courses you should take to finish all courses.</p>
<p>There may be multiple correct orders, you just need to return one of them. If it is impossible to finish all courses, return an empty array.</p>
<p>For example:</p>
<p><code>2, [[1,0]]</code>  </p>
<p>There are a total of 2 courses to take. To take course 1 you should have finished course 0. So the correct course order is [0,1]</p>
<p><code>4, [[1,0],[2,0],[3,1],[3,2]]</code>  </p>
<p>There are a total of 4 courses to take. To take course 3 you should have finished both courses 1 and 2. Both courses 1 and 2 should be taken after you finished course 0. So one correct course order is <code>[0,1,2,3]</code>. Another correct ordering is<code>[0,2,1,3]</code>.<br>原题意思是差不多的，只不过要求的结果不一样了，这次是要求出能够完成所有课程学习的序列。那么这个问题就比上一个问题还复杂一些了，</p>
<!-- UY BEGIN -->
<p><div id="uyan_frame"></div></p>
<p><script type="text/javascript" src="http://v2.uyan.cc/code/uyan.js?uid=2147299"></script><br><!-- UY END --></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://coderlongren.github.io/2018/04/05/HeapSort/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Sailong Ren">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="coderlong的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/05/HeapSort/" itemprop="url">记一次堆排序</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-05T10:13:40+08:00">
                2018-04-05
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/algorithm/" itemprop="url" rel="index">
                    <span itemprop="name">algorithm</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="摘要"><a href="#摘要" class="headerlink" title="摘要"></a>摘要</h3><p>作为选择排序的改进版，堆排序可以把每一趟元素的比较结果保存下来，以便我们在选择最小/大元素时对已经比较过的元素做出相应的调整。<br>堆排序是一种树形选择排序，在排序过程中可以把元素看成是一颗完全二叉树，每个节点都大（小）于它的两个子节点，当每个节点都大于等于它的两个子节点时，就称为大顶堆，也叫堆有序； 当每个节点都小于等于它的两个子节点时，就称为小顶堆。<br>下面所示就是最大堆，最小堆<br><img src="/images/zuidadui.png" alt=""><br><img src="/images/zuidadui2.png" alt=""></p>
<h2 id="堆的初始化"><a href="#堆的初始化" class="headerlink" title="堆的初始化"></a>堆的初始化</h2><p>将数组构造成初始堆（若想升序则建立大根堆，若想降序，则建立小根堆）从最后一个节点开始调整，得到初始堆。<br><img src="/images/jiandui.png" alt=""><br><code>代码很简单</code><br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 模拟堆的构造</span></div><div class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = len/<span class="number">2</span> - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</div><div class="line">	headAdjust(arr, i, len);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>然后就是每次把堆顶元素和尾部元素交换，当然每次交换之后可能会造成堆的失衡，所以每次都会调整堆。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 堆的调整算法</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">headAdjust</span><span class="params">(<span class="keyword">int</span>[] arr, <span class="keyword">int</span> i, <span class="keyword">int</span> len)</span> </span>&#123;</div><div class="line">		<span class="comment">// i 为非叶子节点的索引</span></div><div class="line">		<span class="keyword">int</span> left;</div><div class="line">		<span class="keyword">int</span> right;</div><div class="line">		<span class="keyword">int</span> j;</div><div class="line">		<span class="keyword">while</span> ((left = <span class="number">2</span>*i + <span class="number">1</span>) &lt;= len) &#123; <span class="comment">// 判断当前节点有无 左节点，left为左节点</span></div><div class="line">			right = left + <span class="number">1</span>; <span class="comment">// 右节点</span></div><div class="line">			j = left; <span class="comment">// j ---&gt; left</span></div><div class="line">			<span class="keyword">if</span> (j &lt; len) &#123; <span class="comment">// 上面假设的右节点存在的话</span></div><div class="line">				<span class="keyword">if</span> (arr[left] &lt; arr[right]) &#123;</div><div class="line">					j++; <span class="comment">// j---&gt; right 指向右节点</span></div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">			<span class="keyword">if</span> (arr[i] &lt; arr[j]) &#123;</div><div class="line">				swap(arr, i, j);</div><div class="line">			&#125;</div><div class="line">			<span class="keyword">else</span> &#123;</div><div class="line">				<span class="keyword">break</span>; <span class="comment">// 父节点，比左右孩子节点都大，不需要比较了</span></div><div class="line">			&#125;</div><div class="line">			</div><div class="line">			<span class="comment">// 这个 i = j， 会循环调整堆</span></div><div class="line">			i = j;</div><div class="line">		&#125;</div><div class="line">	&#125;</div></pre></td></tr></table></figure>
<p><img src="/images/duipaixu.png" alt=""><br>最后附上自己的全部代码<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> someSortAlgorithm;</div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment">* <span class="doctag">@author</span> 作者 : coderlong</span></div><div class="line"><span class="comment">* <span class="doctag">@version</span> 创建时间：2018年1月3日 上午10:41:58</span></div><div class="line"><span class="comment">* 类说明: 堆排序和 归并排序一样都是时间复杂度为 nlog(n)，同事又和插入排序一样都是 就地排序</span></div><div class="line"><span class="comment">*  不需要额外的空间</span></div><div class="line"><span class="comment">*/</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HeapSort</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">		<span class="comment">// TODO Auto-generated method stub</span></div><div class="line">		<span class="keyword">int</span>[] arr = &#123;<span class="number">20</span>,<span class="number">50</span>,<span class="number">10</span>,<span class="number">40</span>,<span class="number">70</span>,<span class="number">10</span>,<span class="number">80</span>,<span class="number">30</span>,<span class="number">60</span>&#125;;</div><div class="line">		System.out.println(<span class="string">"堆排序之前"</span>);</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i : arr) &#123;</div><div class="line">			System.out.print(i + <span class="string">" "</span>);</div><div class="line">		&#125;</div><div class="line">		heapSort(arr);</div><div class="line">		System.out.println(<span class="string">"\n 堆排序之后"</span>);</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i : arr) &#123;</div><div class="line">			System.out.print(i + <span class="string">" "</span>);</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		</div><div class="line">	&#125;</div><div class="line">	<span class="comment">// 堆排序算法， 最大堆</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">heapSort</span><span class="params">(<span class="keyword">int</span>[] arr)</span> </span>&#123;</div><div class="line">		<span class="keyword">int</span> len = arr.length - <span class="number">1</span>;</div><div class="line">		<span class="comment">// 模拟堆的构造</span></div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = len/<span class="number">2</span> - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</div><div class="line">			headAdjust(arr, i, len);</div><div class="line">		&#125;</div><div class="line">		</div><div class="line">		<span class="keyword">while</span> (len &gt;= <span class="number">0</span>) &#123;</div><div class="line">			swap(arr, <span class="number">0</span>, len); <span class="comment">// 堆顶元素，和尾节点交换之后，长度减一，最大元素已经到了堆的最后</span></div><div class="line">			len--; <span class="comment">// 堆长度减一</span></div><div class="line">			headAdjust(arr, <span class="number">0</span>, len); <span class="comment">// 再次对堆进行调整 </span></div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="comment">// 堆的调整算法， 堆排序的关键之处</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">headAdjust</span><span class="params">(<span class="keyword">int</span>[] arr, <span class="keyword">int</span> i, <span class="keyword">int</span> len)</span> </span>&#123;</div><div class="line">		<span class="comment">// i 为非叶子节点的索引</span></div><div class="line">		<span class="keyword">int</span> left;</div><div class="line">		<span class="keyword">int</span> right;</div><div class="line">		<span class="keyword">int</span> j;</div><div class="line">		<span class="keyword">while</span> ((left = <span class="number">2</span>*i + <span class="number">1</span>) &lt;= len) &#123; <span class="comment">// 判断当前节点有无 左节点，left为左节点</span></div><div class="line">			right = left + <span class="number">1</span>; <span class="comment">// 右节点</span></div><div class="line">			j = left; <span class="comment">// j ---&gt; left</span></div><div class="line">			<span class="keyword">if</span> (j &lt; len) &#123; <span class="comment">// 上面假设的右节点存在的话</span></div><div class="line">				<span class="keyword">if</span> (arr[left] &lt; arr[right]) &#123;</div><div class="line">					j++; <span class="comment">// j---&gt; right 指向右节点</span></div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">			<span class="keyword">if</span> (arr[i] &lt; arr[j]) &#123;</div><div class="line">				swap(arr, i, j);</div><div class="line">			&#125;</div><div class="line">			<span class="keyword">else</span> &#123;</div><div class="line">				<span class="keyword">break</span>; <span class="comment">// 父节点，比左右孩子节点都大，不需要比较了</span></div><div class="line">			&#125;</div><div class="line">			</div><div class="line">			<span class="comment">// 这个 i = j， 会循环调整堆</span></div><div class="line">			i = j;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="comment">// 交换，堆中两个节点的值, 其实就是每次调整完之后，把堆顶的最大元素放到尾部，就好比进行了一次冒泡</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">swap</span><span class="params">(<span class="keyword">int</span>[] arr, <span class="keyword">int</span> i, <span class="keyword">int</span> j)</span> </span>&#123;</div><div class="line">		<span class="keyword">int</span> temp = arr[i];</div><div class="line">		arr[i] = arr[j];</div><div class="line">		arr[j] = temp;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>result : </p>
<pre><code>堆排序之前
20 50 10 40 70 10 80 30 60 
 堆排序之后
10 10 20 30 40 50 60 70 80 
</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://coderlongren.github.io/2018/04/05/硬币组合/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Sailong Ren">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="coderlong的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/05/硬币组合/" itemprop="url">硬币组合</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-05T10:12:40+08:00">
                2018-04-05
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/algorithm/" itemprop="url" rel="index">
                    <span itemprop="name">algorithm</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><p>给定一个数值sum，假设我们有m种不同类型的硬币{V1, V2, …, Vm}，如果要组合成sum，求所有可能的组合数。<br>给定一个数值sum，假设我们有m种不同类型的硬币{V1, V2, …, Vm}，如果要组合成sum<br><code>sum = x1*v1 + x2*v2 + x3*v3 + ..... + xm*vm</code><br>求所有可能的组合数，求满足所有等值的系数<code>{x1,x2,x3,...xm}</code></p>
<h2 id="暴力破解"><a href="#暴力破解" class="headerlink" title="暴力破解"></a>暴力破解</h2><p>枚举，每个系数取值<br>    x1 = {0,1,2….sum/v1}<br>    x2 = {0,1,2….sum/v2}<br>    .<br>    .<br>    .<br>    .</p>
<p>复杂度很高  </p>
<h2 id="动态规划"><a href="#动态规划" class="headerlink" title="动态规划"></a>动态规划</h2><pre><code>设vm硬币取值 0-m  
sum = x1*v1 + x2*v2 + x3*v3 + .... + 0*vm
sum = x1*v1 + x2*v2 + x3*v3 + .... + 1*vm
sum = x1*v1 + x2*v2 + x3*v3 + .... + 2*vm
sum = x1*v1 + x2*v2 + x3*v3 + .... + 3*vm
               .......
sum = x1*v1 + x2*v2 + x3*v3 + .... + k*vm
</code></pre><p>k = sum/vm<br><code>dp[i][sum] = 前i种硬币构成sum的所有组合数</code><br>    dp[i][sum] =<br>    dp[i-1][sum - 0<em>Vm] + dp[i-1][sum - 1</em>Vm]+ dp[i-1][sum - 2<em>Vm] + … + dp[i-1][sum - K</em>Vm]; 其中K = sum / Vm</p>
<p><img src="http://www.sciweavers.org/tex2img.php?eq=dp%5Bi%5D%5Bsum%5D%20%3D%20%5Csum_%7Bk%3D0%7D%5E%7Bsum%2FVm%7D%20dp%5Bi-1%5D%5Bsum%20-%20k%2AVm%5D&amp;bc=White&amp;fc=Black&amp;im=png&amp;fs=12&amp;ff=arev&amp;edit=0" alt="数学表达"></p>
<p>一般例子解答：<br> 假设我们有3种不同面值的硬币｛1，2，5｝，用这些硬币组合够成一个给定的数值n。<br>问总过有多少种可能的组合方式？保证n小于等于100000。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; <span class="number">10</span>; i++) &#123;</div><div class="line">		System.out.println(coin_count(i));</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">coin_count</span> <span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</div><div class="line">	<span class="keyword">int</span>[] coins = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">5</span>&#125;;</div><div class="line">	<span class="keyword">int</span>[] dp = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">100000</span>];</div><div class="line">	dp[<span class="number">0</span>] = <span class="number">1</span>;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; coins.length; i++) &#123;</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> j = coins[i]; j &lt;= n; j++) &#123;</div><div class="line">			dp[j] = dp[j] + dp[j - coins[i]];</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> dp[n];</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>结果：<br>    1<br>    2<br>    2<br>    3<br>    4<br>    5<br>    6<br>    7<br>    8</p>
<hr>
<h2 id="硬币问题的变幻"><a href="#硬币问题的变幻" class="headerlink" title="硬币问题的变幻"></a>硬币问题的变幻</h2><p>现在给定入肝硬币， 例如{1,2,5}，sum = 11  result = 3; 11 = 5+5+1    求组合成sum的最少的硬币数，如果无法组合，例如 {2}， sum = 3 ; result = -1.  </p>
<pre><code>dp[0] = 0;
dp[1] = 1;
dp[2] = min(dp[2], dp[2 - 1] + 1, dp[2 - 2] + 1) = dp[0] + 1 = 1; 
dp[3] = min(dp[3], dp[3 - 1] + 1, dp[3 - 2] + 1) = dp[1] + 1 = 2;
........
dp[n] = min(dp[n], dp[n - coins[j]] + 1) : coins[j] &lt;= n;
</code></pre><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">coinChange</span><span class="params">(<span class="keyword">int</span>[] coins, <span class="keyword">int</span> amount)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span> (coins == <span class="keyword">null</span> || coins.length == <span class="number">0</span> || amount &lt;= <span class="number">0</span>) &#123;</div><div class="line">    	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span> (coins.length == <span class="number">1</span>) &#123;</div><div class="line">    	</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">int</span>[] dp = <span class="keyword">new</span> <span class="keyword">int</span>[amount + <span class="number">1</span>];</div><div class="line">    Arrays.fill(dp, <span class="number">100000</span>);</div><div class="line">    dp[<span class="number">0</span>] = <span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= amount; i++) &#123;</div><div class="line">    	<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; coins.length; j++) &#123;</div><div class="line">    		<span class="keyword">if</span> (i &gt;= coins[j]) &#123;</div><div class="line">    			dp[i] = Math.min(dp[i], dp[i - coins[j]]+ <span class="number">1</span>);</div><div class="line">    		&#125;</div><div class="line">    	&#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> dp[amount] == <span class="number">100000</span>?-<span class="number">1</span>:dp[amount];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<!-- UY BEGIN -->
<p><div id="uyan_frame"></div></p>
<p><script type="text/javascript" src="http://v2.uyan.cc/code/uyan.js?uid=2147299"></script><br><!-- UY END --></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://coderlongren.github.io/2018/04/04/leetcode300_Logest_increasing_Subswquences/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Sailong Ren">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="coderlong的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/04/leetcode300_Logest_increasing_Subswquences/" itemprop="url">leetcode300. Longest Increasing Subsequence</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-04T22:18:40+08:00">
                2018-04-04
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/algorithm/" itemprop="url" rel="index">
                    <span itemprop="name">algorithm</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Given an unsorted array of integers, find the length of longest increasing subsequence.</p>
<p><em>For example</em>,<br>Given <code>[10, 9, 2, 5, 3, 7, 101, 18]</code>,<br>The longest increasing subsequence is <code>[2, 3, 7, 101]</code>, therefore the length is 4. Note that there may be more than one LIS combination, it is only necessary for you to return the length.</p>
<p>Your algorithm should run in O(n2) complexity.</p>
<p><em>Follow up</em>: Could you improve it to O(n log n) time complexity?<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 如果只是，求连续的递增子序列，下面的DP函数，就可以求出</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">lengthOfLIS</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</div><div class="line">	<span class="keyword">if</span> (nums == <span class="keyword">null</span> || nums.length == <span class="number">0</span>) &#123;</div><div class="line">		<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">if</span> (nums.length == <span class="number">1</span>) &#123;</div><div class="line">		<span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">int</span>[] dp = <span class="keyword">new</span> <span class="keyword">int</span>[nums.length  + <span class="number">1</span>];</div><div class="line">	dp[<span class="number">0</span>] = <span class="number">1</span>;</div><div class="line">	<span class="keyword">int</span> res = Integer.MIN_VALUE;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; nums.length; i++) &#123;</div><div class="line">		dp[i] = nums[i] &gt; nums[i - <span class="number">1</span>] ? dp[i - <span class="number">1</span>] + <span class="number">1</span> : <span class="number">1</span>;</div><div class="line">		res = Math.max(res, dp[i]);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> res;</div><div class="line"> &#125;</div></pre></td></tr></table></figure></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 非连续的递增子序列, 控制在O(n^2)</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">lengthOfLIS2</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</div><div class="line">	<span class="keyword">if</span> (nums == <span class="keyword">null</span> || nums.length == <span class="number">0</span>) &#123;</div><div class="line">		<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">if</span> (nums.length == <span class="number">1</span>) &#123;</div><div class="line">		<span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">int</span>[] dp = <span class="keyword">new</span> <span class="keyword">int</span>[nums.length  + <span class="number">1</span>];</div><div class="line">	dp[<span class="number">0</span>] = <span class="number">1</span>;</div><div class="line">	<span class="keyword">int</span> res = Integer.MIN_VALUE;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; nums.length; i++) &#123;</div><div class="line">		<span class="keyword">int</span> temp = Integer.MIN_VALUE;</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; i; j++) &#123;</div><div class="line">			<span class="keyword">if</span> (nums[i] &gt; nums[j]) &#123;</div><div class="line">				temp = Math.max(temp, dp[j]);</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		dp[i] = temp == Integer.MIN_VALUE ? <span class="number">1</span> : temp + <span class="number">1</span>;</div><div class="line">		res = Math.max(res, dp[i]);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> res;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://coderlongren.github.io/2018/04/03/Java并发四大组件/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Sailong Ren">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="coderlong的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/03/Java并发四大组件/" itemprop="url">JUC的四大组件</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-03T21:18:40+08:00">
                2018-04-03
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/JUC/" itemprop="url" rel="index">
                    <span itemprop="name">JUC</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="CyclicBarrier"><a href="#CyclicBarrier" class="headerlink" title="CyclicBarrier"></a>CyclicBarrier</h1><p>它允许一组线程互相等待，直到到达某个公共屏障点 (common barrier point)。在涉及一组固定大小的线程的程序中，这些线程必须不时地互相等待，此时 CyclicBarrier 很有用。因为该 barrier 在释放等待线程后可以重用，所以称它为循环 的 barrier。<br>提供了两个构造：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"> <span class="function"><span class="keyword">public</span> <span class="title">CyclicBarrier</span><span class="params">(<span class="keyword">int</span> parties)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>(parties, <span class="keyword">null</span>);</div><div class="line">    &#125;</div><div class="line"> ``` </div><div class="line"><span class="number">1</span>. CyclicBarrier(<span class="keyword">int</span> parties)：创建一个新的 CyclicBarrier，它将在给定数量的参与者（线程）处于等待状态时启动，但它不会在启动 barrier 时执行预定义的操作。</div><div class="line">```java</div><div class="line"> <span class="function"><span class="keyword">public</span> <span class="title">CyclicBarrier</span><span class="params">(<span class="keyword">int</span> parties, Runnable barrierAction)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (parties &lt;= <span class="number">0</span>) <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException();</div><div class="line">        <span class="keyword">this</span>.parties = parties;</div><div class="line">        <span class="keyword">this</span>.count = parties;</div><div class="line">        <span class="keyword">this</span>.barrierCommand = barrierAction;</div><div class="line">    &#125;</div></pre></td></tr></table></figure></p>
<ol>
<li>CyclicBarrier(int parties, Runnable barrierAction) ：创建一个新的 CyclicBarrier，它将在给定数量的参与者（线程）处于等待状态时启动，并在启动 barrier 时执行给定的屏障操作，该操作由最后一个进入 barrier 的线程执行。</li>
</ol>
<h3 id="await"><a href="#await" class="headerlink" title="await()"></a>await()</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">await</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException, BrokenBarrierException </span>&#123;</div><div class="line">    <span class="keyword">try</span> &#123;</div><div class="line">        <span class="keyword">return</span> dowait(<span class="keyword">false</span>, <span class="number">0L</span>);</div><div class="line">    &#125; <span class="keyword">catch</span> (TimeoutException toe) &#123;</div><div class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> Error(toe); <span class="comment">// cannot happen</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>内部调用 dowait()<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">dowait</span><span class="params">(<span class="keyword">boolean</span> timed, <span class="keyword">long</span> nanos)</span></span></div><div class="line"><span class="function">            <span class="keyword">throws</span> InterruptedException, BrokenBarrierException,</span></div><div class="line"><span class="function">            TimeoutException </span>&#123;</div><div class="line">        <span class="comment">//获取锁</span></div><div class="line">        <span class="keyword">final</span> ReentrantLock lock = <span class="keyword">this</span>.lock;</div><div class="line">        lock.lock();</div><div class="line">        <span class="keyword">try</span> &#123;</div><div class="line">            <span class="comment">//分代</span></div><div class="line">            <span class="keyword">final</span> Generation g = generation;</div><div class="line"></div><div class="line">            <span class="comment">//当前generation“已损坏”，抛出BrokenBarrierException异常</span></div><div class="line">            <span class="comment">//抛出该异常一般都是某个线程在等待某个处于“断开”状态的CyclicBarrie</span></div><div class="line">            <span class="keyword">if</span> (g.broken)</div><div class="line">                <span class="comment">//当某个线程试图等待处于断开状态的 barrier 时，或者 barrier 进入断开状态而线程处于等待状态时，抛出该异常</span></div><div class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> BrokenBarrierException();</div><div class="line"></div><div class="line">            <span class="comment">//如果线程中断，终止CyclicBarrier</span></div><div class="line">            <span class="keyword">if</span> (Thread.interrupted()) &#123;</div><div class="line">                breakBarrier();</div><div class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> InterruptedException();</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            <span class="comment">//进来一个线程 count - 1</span></div><div class="line">            <span class="keyword">int</span> index = --count;</div><div class="line">            <span class="comment">//count == 0 表示所有线程均已到位，触发Runnable任务</span></div><div class="line">            <span class="keyword">if</span> (index == <span class="number">0</span>) &#123;  <span class="comment">// tripped</span></div><div class="line">                <span class="keyword">boolean</span> ranAction = <span class="keyword">false</span>;</div><div class="line">                <span class="keyword">try</span> &#123;</div><div class="line">                    <span class="keyword">final</span> Runnable command = barrierCommand;</div><div class="line">                    <span class="comment">//触发任务</span></div><div class="line">                    <span class="keyword">if</span> (command != <span class="keyword">null</span>)</div><div class="line">                        command.run();</div><div class="line">                    ranAction = <span class="keyword">true</span>;</div><div class="line">                    <span class="comment">//唤醒所有等待线程，并更新generation</span></div><div class="line">                    nextGeneration();</div><div class="line">                    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">                &#125; <span class="keyword">finally</span> &#123;</div><div class="line">                    <span class="keyword">if</span> (!ranAction)</div><div class="line">                        breakBarrier();</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line"></div><div class="line"></div><div class="line">            <span class="keyword">for</span> (;;) &#123;</div><div class="line">                <span class="keyword">try</span> &#123;</div><div class="line">                    <span class="comment">//如果不是超时等待，则调用Condition.await()方法等待</span></div><div class="line">                    <span class="keyword">if</span> (!timed)</div><div class="line">                        trip.await();</div><div class="line">                    <span class="keyword">else</span> <span class="keyword">if</span> (nanos &gt; <span class="number">0L</span>)</div><div class="line">                        <span class="comment">//超时等待，调用Condition.awaitNanos()方法等待</span></div><div class="line">                        nanos = trip.awaitNanos(nanos);</div><div class="line">                &#125; <span class="keyword">catch</span> (InterruptedException ie) &#123;</div><div class="line">                    <span class="keyword">if</span> (g == generation &amp;&amp; ! g.broken) &#123;</div><div class="line">                        breakBarrier();</div><div class="line">                        <span class="keyword">throw</span> ie;</div><div class="line">                    &#125; <span class="keyword">else</span> &#123;</div><div class="line">                        <span class="comment">// We're about to finish waiting even if we had not</span></div><div class="line">                        <span class="comment">// been interrupted, so this interrupt is deemed to</span></div><div class="line">                        <span class="comment">// "belong" to subsequent execution.</span></div><div class="line">                        Thread.currentThread().interrupt();</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line"></div><div class="line">                <span class="keyword">if</span> (g.broken)</div><div class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> BrokenBarrierException();</div><div class="line"></div><div class="line">                <span class="comment">//generation已经更新，返回index</span></div><div class="line">                <span class="keyword">if</span> (g != generation)</div><div class="line">                    <span class="keyword">return</span> index;</div><div class="line"></div><div class="line">                <span class="comment">//“超时等待”，并且时间已到,终止CyclicBarrier，并抛出异常</span></div><div class="line">                <span class="keyword">if</span> (timed &amp;&amp; nanos &lt;= <span class="number">0L</span>) &#123;</div><div class="line">                    breakBarrier();</div><div class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> TimeoutException();</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125; <span class="keyword">finally</span> &#123;</div><div class="line">            <span class="comment">//释放锁</span></div><div class="line">            lock.unlock();</div><div class="line">        &#125;</div><div class="line">    &#125;</div></pre></td></tr></table></figure></p>
<p>这里的await() 主要逻辑就是,如果次线程不是最后到达的，就处于等待状态：  </p>
<ol>
<li>最后一个线程到达时候，index = 0;  </li>
<li>超时；</li>
<li>其他的某个线程中断当前线程</li>
<li>其他的某个线程中断另一个等待的线程</li>
<li>其他的某个线程在等待barrier超时</li>
<li>其他的某个线程在此barrier调用reset()方法。reset() 方法用于将屏障重置为初始状态。</li>
</ol>
<p>在CyclicBarrier中，同一批线程属于同一代。当有parties个线程到达barrier，generation就会被更新换代。其中broken标识该当前CyclicBarrier是否已经处于中断状态。<br>示例代码，开会协议：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> java.util.concurrent.CyclicBarrier;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment">* <span class="doctag">@author</span> 作者 : coderlong</span></div><div class="line"><span class="comment">* <span class="doctag">@version</span> 创建时间：2018年4月1日 下午10:06:51</span></div><div class="line"><span class="comment">* 类说明: </span></div><div class="line"><span class="comment">*/</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CyclicbarrierTest</span> </span>&#123;</div><div class="line">	<span class="keyword">private</span> <span class="keyword">static</span> CyclicBarrier cyclicBarrier;</div><div class="line">	<span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">CyclicBarrierThread</span> <span class="keyword">extends</span> <span class="title">Thread</span> </span>&#123;</div><div class="line">		<span class="meta">@Override</span></div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</div><div class="line">			<span class="comment">// TODO Auto-generated method stub</span></div><div class="line">			System.out.println(<span class="string">"一个成员到达"</span>);</div><div class="line">			<span class="keyword">try</span> &#123;</div><div class="line">				cyclicBarrier.await(); <span class="comment">// 等待</span></div><div class="line">			&#125; <span class="keyword">catch</span> (Exception e) &#123;</div><div class="line">				<span class="comment">// <span class="doctag">TODO:</span> handle exception</span></div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">		<span class="comment">// TODO Auto-generated method stub</span></div><div class="line">		cyclicBarrier = <span class="keyword">new</span> CyclicBarrier(<span class="number">10</span>, <span class="keyword">new</span> Runnable() &#123;</div><div class="line">			</div><div class="line">			<span class="meta">@Override</span></div><div class="line">			<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</div><div class="line">				<span class="comment">// TODO Auto-generated method stub</span></div><div class="line">				System.out.println(<span class="string">"人都到齐了，开会！"</span>);</div><div class="line">			&#125;</div><div class="line">		&#125;);</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</div><div class="line">			<span class="keyword">new</span> CyclicBarrierThread().start();</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<pre><code>一个成员到达
一个成员到达
一个成员到达
一个成员到达
一个成员到达
一个成员到达
一个成员到达
一个成员到达
一个成员到达
一个成员到达
人都到齐了，开会！
</code></pre><h1 id="CountDownLatch"><a href="#CountDownLatch" class="headerlink" title="CountDownLatch"></a>CountDownLatch</h1><p>CountDownLatch所描述的是”在完成一组正在其他线程中执行的操作之前，它允许一个或多个线程一直等待“。<br>教科书–》用给定的计数 初始化 CountDownLatch。由于调用了 countDown() 方法，所以在当前计数到达零之前，await 方法会一直受阻塞。之后，会释放所有等待的线程，await 的所有后续调用都将立即返回。这种现象只出现一次——计数无法被重置。如果需要重置计数，请考虑使用 CyclicBarrier。 </p>
<h2 id="gouzaofangfa"><a href="#gouzaofangfa" class="headerlink" title="gouzaofangfa"></a>gouzaofangfa</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="title">CountDownLatch</span><span class="params">(<span class="keyword">int</span> count)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (count &lt; <span class="number">0</span>) <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"count &lt; 0"</span>);</div><div class="line">        <span class="keyword">this</span>.sync = <span class="keyword">new</span> Sync(count);</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<p>此处的sync就是前面说过那个鼎鼎大名的AQS同步器，所以学好AQS还是很有必要的。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">Sync</span> <span class="keyword">extends</span> <span class="title">AbstractQueuedSynchronizer</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">4982264981922014374L</span>;</div><div class="line"></div><div class="line">    Sync(<span class="keyword">int</span> count) &#123;</div><div class="line">        setState(count);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">//获取同步状态</span></div><div class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getCount</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> getState();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">//获取同步状态</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">int</span> <span class="title">tryAcquireShared</span><span class="params">(<span class="keyword">int</span> acquires)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> (getState() == <span class="number">0</span>) ? <span class="number">1</span> : -<span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">//释放同步状态</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">boolean</span> <span class="title">tryReleaseShared</span><span class="params">(<span class="keyword">int</span> releases)</span> </span>&#123;</div><div class="line">        <span class="keyword">for</span> (;;) &#123;</div><div class="line">            <span class="keyword">int</span> c = getState();</div><div class="line">            <span class="keyword">if</span> (c == <span class="number">0</span>)</div><div class="line">                <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">            <span class="keyword">int</span> nextc = c-<span class="number">1</span>;</div><div class="line">            <span class="keyword">if</span> (compareAndSetState(c, nextc))</div><div class="line">                <span class="keyword">return</span> nextc == <span class="number">0</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>await()方法，使当前线程在计数器至0之前，一直等待，除非发生中断<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">await</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</div><div class="line">    sync.acquireSharedInterruptibly(<span class="number">1</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>内部调用sync的acquireSharedInterruptibly(int arg)<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title">acquireSharedInterruptibly</span><span class="params">(<span class="keyword">int</span> arg)</span></span></div><div class="line"><span class="function">            <span class="keyword">throws</span> InterruptedException </span>&#123;</div><div class="line">        <span class="keyword">if</span> (Thread.interrupted())</div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> InterruptedException();</div><div class="line">        <span class="keyword">if</span> (tryAcquireShared(arg) &lt; <span class="number">0</span>)</div><div class="line">            doAcquireSharedInterruptibly(arg);</div><div class="line">    &#125;</div></pre></td></tr></table></figure></p>
<p>sync重写了tryAcquireShared(int arg)<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">int</span> <span class="title">tryAcquireShared</span><span class="params">(<span class="keyword">int</span> acquires)</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> (getState() == <span class="number">0</span>) ? <span class="number">1</span> : -<span class="number">1</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>CAS方法getState()获取同步状态，如果计数器值不等于0，则会调用doAcquireSharedInterruptibly(int arg)，该方法为一个自旋方法会尝试一直去获取同步状态<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">doAcquireSharedInterruptibly</span><span class="params">(<span class="keyword">int</span> arg)</span></span></div><div class="line"><span class="function">        <span class="keyword">throws</span> InterruptedException </span>&#123;</div><div class="line">    <span class="keyword">final</span> Node node = addWaiter(Node.SHARED);</div><div class="line">    <span class="keyword">boolean</span> failed = <span class="keyword">true</span>;</div><div class="line">    <span class="keyword">try</span> &#123;</div><div class="line">        <span class="keyword">for</span> (;;) &#123;</div><div class="line">            <span class="keyword">final</span> Node p = node.predecessor();</div><div class="line">            <span class="keyword">if</span> (p == head) &#123;</div><div class="line">                <span class="comment">/**</span></div><div class="line"><span class="comment">                 * 对于CountDownLatch而言，如果计数器值不等于0，那么r 会一直小于0</span></div><div class="line"><span class="comment">                 */</span></div><div class="line">                <span class="keyword">int</span> r = tryAcquireShared(arg);</div><div class="line">                <span class="keyword">if</span> (r &gt;= <span class="number">0</span>) &#123;</div><div class="line">                    setHeadAndPropagate(node, r);</div><div class="line">                    p.next = <span class="keyword">null</span>; <span class="comment">// help GC</span></div><div class="line">                    failed = <span class="keyword">false</span>;</div><div class="line">                    <span class="keyword">return</span>;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">            <span class="comment">//等待</span></div><div class="line">            <span class="keyword">if</span> (shouldParkAfterFailedAcquire(p, node) &amp;&amp;</div><div class="line">                    parkAndCheckInterrupt())</div><div class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> InterruptedException();</div><div class="line">        &#125;</div><div class="line">    &#125; <span class="keyword">finally</span> &#123;</div><div class="line">        <span class="keyword">if</span> (failed)</div><div class="line">            cancelAcquire(node);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="countDown"><a href="#countDown" class="headerlink" title="countDown()"></a>countDown()</h3><p>CountDownLatch提供countDown() 方法递减锁存器的计数，如果计数到达零，则释放所有等待的线程。</p>
<h3 id="示例代码，开会"><a href="#示例代码，开会" class="headerlink" title="示例代码，开会"></a>示例代码，开会</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> java.util.concurrent.CountDownLatch;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment">* <span class="doctag">@author</span> 作者 : coderlong</span></div><div class="line"><span class="comment">* <span class="doctag">@version</span> 创建时间：2018年4月1日 下午10:26:19</span></div><div class="line"><span class="comment">* 类说明: </span></div><div class="line"><span class="comment">*/</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CountDownLatchTest</span> </span>&#123;</div><div class="line">	<span class="keyword">private</span> <span class="keyword">static</span> CountDownLatch countDownLatch;</div><div class="line">	</div><div class="line">	<span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Bossthread</span> <span class="keyword">extends</span> <span class="title">Thread</span> </span>&#123;</div><div class="line">		<span class="meta">@Override</span></div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</div><div class="line">			<span class="comment">// TODO Auto-generated method stub</span></div><div class="line">			System.out.println(<span class="string">"老板在等待，本次会议需要"</span> + countDownLatch.getCount() + <span class="string">"位员工"</span>);</div><div class="line">			<span class="keyword">try</span> &#123;</div><div class="line">				countDownLatch.await();</div><div class="line">			&#125; <span class="keyword">catch</span> (Exception e) &#123;</div><div class="line">				<span class="comment">// <span class="doctag">TODO:</span> handle exception</span></div><div class="line">			&#125;</div><div class="line">			System.out.println(<span class="string">"所有员工到达，开始开会"</span>);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="comment">//员工到达会议室</span></div><div class="line">    <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">EmpleoyeeThread</span>  <span class="keyword">extends</span> <span class="title">Thread</span></span>&#123;</div><div class="line">        <span class="meta">@Override</span></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</div><div class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">"，到达会议室...."</span>);</div><div class="line">            <span class="comment">//员工到达会议室 count - 1</span></div><div class="line">            countDownLatch.countDown();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    </div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">		<span class="comment">// TODO Auto-generated method stub</span></div><div class="line">		countDownLatch = <span class="keyword">new</span> CountDownLatch(<span class="number">5</span>);</div><div class="line">		<span class="keyword">new</span> Bossthread().start();</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</div><div class="line">			<span class="keyword">new</span> EmpleoyeeThread().start();</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="Semaphore"><a href="#Semaphore" class="headerlink" title="Semaphore"></a>Semaphore</h1><p>信号量Semaphore是一个控制访问多个共享资源的计数器，和CountDownLatch一样，其本质上是一个“共享锁”。<br>Semaphore提供了两个构造函数：</p>
<ol>
<li>Semaphore(int permits) ：创建具有给定的许可数和非公平的公平设置的 Semaphore。</li>
<li>Semaphore(int permits, boolean fair) ：创建具有给定的许可数和给定的公平设置的 Semaphore。<br>所以内部的sync有公平和非公平之分<br>当然 Semaphore默认选择非公平锁。绝大时候Java默认都是非公平<br>当信号量Semaphore = 1 时，它可以当作互斥锁使用。<br>信号量的获取  </li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">acquire</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</div><div class="line">        sync.acquireSharedInterruptibly(<span class="number">1</span>);</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<p>调用AQS的acquireSharedInterruptibly(int arg)，该方法以共享模式获取同步状态：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title">acquireSharedInterruptibly</span><span class="params">(<span class="keyword">int</span> arg)</span></span></div><div class="line"><span class="function">            <span class="keyword">throws</span> InterruptedException </span>&#123;</div><div class="line">        <span class="keyword">if</span> (Thread.interrupted())</div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> InterruptedException();</div><div class="line">        <span class="keyword">if</span> (tryAcquireShared(arg) &lt; <span class="number">0</span>)</div><div class="line">            doAcquireSharedInterruptibly(arg);</div><div class="line">    &#125;</div></pre></td></tr></table></figure></p>
<p>上面的这个方法一般都是交付给子类来完成的,而且分公平，非公平之说:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">int</span> <span class="title">tryAcquireShared</span><span class="params">(<span class="keyword">int</span> acquires)</span> </span>&#123;</div><div class="line">    <span class="keyword">for</span> (;;) &#123;</div><div class="line">        <span class="comment">//判断该线程是否位于CLH队列的列头</span></div><div class="line">        <span class="keyword">if</span> (hasQueuedPredecessors())</div><div class="line">            <span class="keyword">return</span> -<span class="number">1</span>;</div><div class="line">        <span class="comment">//获取当前的信号量许可</span></div><div class="line">        <span class="keyword">int</span> available = getState();</div><div class="line"></div><div class="line">        <span class="comment">//设置“获得acquires个信号量许可之后，剩余的信号量许可数”</span></div><div class="line">        <span class="keyword">int</span> remaining = available - acquires;</div><div class="line"></div><div class="line">        <span class="comment">//CAS设置信号量</span></div><div class="line">        <span class="keyword">if</span> (remaining &lt; <span class="number">0</span> ||</div><div class="line">                compareAndSetState(available, remaining))</div><div class="line">            <span class="keyword">return</span> remaining;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>非公平<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">final</span> <span class="keyword">int</span> <span class="title">nonfairTryAcquireShared</span><span class="params">(<span class="keyword">int</span> acquires)</span> </span>&#123;</div><div class="line">    <span class="keyword">for</span> (;;) &#123;</div><div class="line">        <span class="keyword">int</span> available = getState();</div><div class="line">        <span class="keyword">int</span> remaining = available - acquires;</div><div class="line">        <span class="keyword">if</span> (remaining &lt; <span class="number">0</span> ||</div><div class="line">            compareAndSetState(available, remaining))</div><div class="line">            <span class="keyword">return</span> remaining;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>用完之后释放就OK了。当然还是交给了内部的AQS来实现的</p>
<h1 id="Exchanger"><a href="#Exchanger" class="headerlink" title="Exchanger"></a>Exchanger</h1><p>好吧，这个我并不是很懂。<br>API这样说：<br>可以在对中对元素进行配对和交换的线程的同步点。每个线程将条目上的某个方法呈现给 exchange 方法，与伙伴线程进行匹配，并且在返回时接收其伙伴的对象。Exchanger 可能被视为 SynchronousQueue 的双向形式。Exchanger 可能在应用程序（比如遗传算法和管道设计）中很有用。原谅我的算法渣渣，什么遗传算法，也只是听说过而已，从未动手写过。<br>可以去看<a href="http://brokendreams.iteye.com/blog/2253956" target="_blank" rel="external">这位大神的分析</a>。<br>四大组件，就到这里吧，杀死我N个脑细胞，不过使用JUC自带的并发结构，好处多多，自己体会吧。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/12/">12</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.png"
               alt="Sailong Ren" />
          <p class="site-author-name" itemprop="name">Sailong Ren</p>
           
              <p class="site-description motion-element" itemprop="description"></p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">116</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">24</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">51</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/coderlongren" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                    
                      GitHub
                    
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://blog.csdn.net/qq_33797928?ref=toolbar" target="_blank" title="CSDN博客">
                  
                    <i class="fa fa-fw fa-crosshairs"></i>
                  
                    
                      CSDN博客
                    
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="862983319@qq.com" target="_blank" title="E-Mail">
                  
                    <i class="fa fa-fw fa-envelope"></i>
                  
                    
                      E-Mail
                    
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://www.zhihu.com/people/coderlongren/activities" target="_blank" title="知乎">
                  
                    <i class="fa fa-fw fa-twitter"></i>
                  
                    
                      知乎
                    
                </a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Sailong Ren</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Gemini
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.2"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.2"></script>



  
    <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script>

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.2"></script>



  


  




	





  





  






  





  

  

  

  

  

  

  
</body>
</html>
